import{r as G,c as a,o as s,d as T,N as X,w as k,j as f,m as W,F as p,_ as I,a as t,h as i,b as w,t as o,i as b,u as v,k as R,g as z,n as J,p as K,q as Q,e as Y}from"./Navigation-yYuU6Nma.js";import{M as V,c as Z,a as ee}from"./MediaGrid-BdEbsuV1.js";import{m as P,a as q,f as te,P as se,i as ae}from"./axios_config-yEhEWjiR.js";import{T as M}from"./ToggleShow-CkQjWKhm.js";import{P as ne,a as le}from"./PopUpGeneric-Byk2JCZB.js";const ie={__name:"App",setup(l){return(_,e)=>{const r=G("router-view");return s(),a(p,null,[T(X),T(r,null,{default:k(({Component:h})=>[(s(),f(W(h)))]),_:1})],64)}}},oe={class:"popup-circle-div"},re={class:"cd-aliases"},de={key:0,class:"cd-pen_names"},ue={key:1,class:"cd-position"},ce={key:2,class:"cd-links"},pe={class:"cd-ul-links"},_e=["innerHTML"],me={key:3,class:"cd-descriptions"},ve={class:"cd-ul-descriptions"},he={key:4},ye={__name:"PopUpCircledetails",props:{circle_db:{type:Object,required:!0},db_path:{type:Array,required:!0}},setup(l){return(_,e)=>(s(),f(ne,{onClose:e[0]||(e[0]=r=>_.$emit("close")),title:`Circle Details: ${l.circle_db.aliases[0]||"undefined"}`},{default:k(()=>{var r,h,d;return[t("div",oe,[t("p",re,[e[1]||(e[1]=t("span",{class:"info-name"},"Names:",-1)),w(" "+o((h=(r=l.circle_db)==null?void 0:r.aliases)==null?void 0:h.join(" / ")),1)]),l.circle_db.hasOwnProperty("pen_names")&&l.circle_db.pen_names?(s(),a("p",de,[e[2]||(e[2]=t("span",{class:"info-name"},"Pen names:",-1)),w(" "+o((d=l.circle_db.pen_names)==null?void 0:d.join(" / ")),1)])):i("",!0),l.circle_db.hasOwnProperty("position")&&l.circle_db.position?(s(),a("p",ue,[e[3]||(e[3]=t("span",{class:"info-name"},"Booth position:",-1)),w(" "+o(l.circle_db.position),1)])):i("",!0),l.circle_db.hasOwnProperty("links")&&l.circle_db.links?(s(),a("div",ce,[e[4]||(e[4]=t("span",{class:"info-name"},"Links:",-1)),t("ul",pe,[(s(!0),a(p,null,b(l.circle_db.links,(y,g)=>(s(),a("li",{class:"cd-link",key:g},[t("span",{innerHTML:v(P)(y)},null,8,_e)]))),128))])])):i("",!0),l.circle_db.hasOwnProperty("comments")&&l.circle_db.comments?(s(),a("div",me,[e[5]||(e[5]=t("span",{class:"info-name"},"Comments:",-1)),t("ul",ve,[(s(!0),a(p,null,b(l.circle_db.comments.split(`
`),(y,g)=>(s(),a("li",{class:"cd-descriptions",key:g},o(y),1))),128))])])):i("",!0),l.circle_db.hasOwnProperty("media")?(s(),a("div",he,[e[6]||(e[6]=t("span",{class:"info-name"},"Media:",-1)),T(V,{media_list:l.circle_db.media,media_folder_path:[v(q)].concat(l.db_path).concat(["media"]).join("/")},null,8,["media_list","media_folder_path"])])):i("",!0)])]}),_:1},8,["title"]))}},ke=I(ye,[["__scopeId","data-v-7769a498"]]),fe={key:0},be={key:1},ge={key:0,class:"status-message"},Pe={key:1,class:"status-message"},we={key:2},Te={class:"ed-div"},Me={key:0,class:"ed-header"},$e=["href"],je={key:1,class:"ed-dates"},Ce={key:2,class:"ed-links"},Le=["innerHTML"],He={class:"ts-description-div"},De=["innerHTML"],Ae={key:4,class:"table-div"},Oe={class:"ed-table"},Ee={key:0},xe=["innerHTML"],Be=["onClick"],Ne={key:0},Ue=["innerHTML"],Re={__name:"EventDetail",props:{db_path:String},setup(l){const _=l,e=R(null),r=R("loading");async function h(){te({url:[se].concat(d.value).join("/")+".json",axiosInstance:ae,on_start:()=>{e.value={},r.value="loading"},on_success:c=>{if(!c.hasOwnProperty("aliases"))throw new Error("Invalid data format: 'aliases' property missing");e.value=c,r.value="loaded"},on_error:c=>{event_group_data_state.value="error"}})}const d=z(()=>_.db_path?_.db_path.split("/").filter(Boolean):[]),y=J("popUpManager");function g(c){y.value.addPopup(Q(ke),{circle_db:c,db_path:d.value.slice(0,-1)})}return K(async()=>{d.value&&(console.log("Url change detected, now fetching new event data..."),_.db_path&&await h())}),(c,u)=>{var $,j,C,L,H,D,A,O,E,x;return s(),a(p,null,[t("head",null,[($=e.value)!=null&&$.aliases?(s(),a("title",fe,`\r
      dea | Event Detail `+o(" - "+((C=(j=e.value)==null?void 0:j.aliases)==null?void 0:C.join(" / ")))+`\r
    `,1)):(s(),a("title",be,"dea | Event Detail"))]),u[4]||(u[4]=t("div",{class:"header-title"},"Event detail",-1)),r.value=="loading"?(s(),a("div",ge," Loading database "+o(_.db_path)+"... ",1)):r.value=="error"?(s(),a("div",Pe,[u[1]||(u[1]=w(" Failed to fetch event group data. ")),t("button",{class:"retry-button",onClick:u[0]||(u[0]=(...n)=>c.fetch_db&&c.fetch_db(...n)),title:"Retry fetching event group data."}," Retry ")])):(s(),a("div",we,[t("div",Te,[e.value.hasOwnProperty("aliases")?(s(),a("div",Me,o(e.value.aliases.join(" / ")),1)):i("",!0),t("a",{class:"ed-parent",href:["/dea/event_group_detail/#"].concat(d.value).slice(0,-1).join("/")}," Parent event group: "+o(d.value[d.value.length-2]),9,$e),(L=e.value)!=null&&L.dates?(s(),a("div",je," Dates: "+o(((H=e.value)==null?void 0:H.dates)??""),1)):i("",!0),(D=e.value)!=null&&D.links&&Array.isArray(e.value.links)?(s(),a("div",Ce,[u[2]||(u[2]=w(" Links: ")),t("span",{innerHTML:v(P)(e.value.links.join(", "))},null,8,Le)])):i("",!0),(A=e.value)!=null&&A.description?(s(),f(M,{key:3,class:"ts-description",button_text:"Description",default_hidden:!1},{default:k(()=>[t("div",He,[(s(!0),a(p,null,b(e.value.description.split(`
`),(n,m)=>(s(),a("p",{key:m},[t("span",{innerHTML:v(P)(n)},null,8,De)]))),128))])]),_:1})):i("",!0),(O=e.value)!=null&&O.circles&&Array.isArray(e.value.circles)&&e.value.circles.length>0?(s(),a("div",Ae,[t("table",Oe,[u[3]||(u[3]=t("thead",null,[t("tr",null,[t("th",{colspan:"5",class:"ed-table-title"},"Participating circles")]),t("tr",null,[t("th",null,"Position"),t("th",null,"Aliases"),t("th",null,"Pen Names"),t("th",null,"links"),t("th",null,"details")])],-1)),t("tbody",null,[(s(!0),a(p,null,b(e.value.circles,(n,m)=>{var B,N,U;return s(),a("tr",{key:m},[t("th",null,o((n==null?void 0:n.position)??""),1),t("th",null,[n&&n.hasOwnProperty("aliases")&&Array.isArray(n.aliases)?(s(),a("span",Ee,o(((B=n==null?void 0:n.aliases)==null?void 0:B.join(" / "))??""),1)):i("",!0)]),t("th",null,o(((N=n==null?void 0:n.pen_names)==null?void 0:N.join(" / "))??""),1),t("th",null,[t("span",{innerHTML:v(P)(((U=n==null?void 0:n.links)==null?void 0:U.join(", "))??"")},null,8,xe)]),t("th",null,[t("button",{class:"ed-popup-button",onClick:Ve=>g(n),title:"Show circle details"}," ðŸ¡µ ",8,Be)])])}),128))])])])):i("",!0),(E=e.value)!=null&&E.sources?(s(),f(M,{key:5,class:"ts-sources",button_text:"Sources"},{default:k(()=>[(s(!0),a(p,null,b(e.value.sources,(n,m)=>(s(),a("p",{key:m},[n.type?(s(),a("span",Ne,"("+o(n.type[0])+", "+o(n.type[1])+") ",1)):i("",!0),n!=null&&n.source?(s(),a("span",{key:1,innerHTML:v(P)(n.source)},null,8,Ue)):i("",!0)]))),128))]),_:1})):i("",!0),e.value&&((x=e.value)!=null&&x.comments)?(s(),f(M,{key:6,class:"ed-comments",button_text:"Comments"},{default:k(()=>[(s(!0),a(p,null,b(e.value.comments.split(`
`),(n,m)=>(s(),a("p",{key:m},o(n),1))),128))]),_:1})):i("",!0),e.value?(s(),f(M,{key:7,class:"ts-sources",button_text:"Media"},{default:k(()=>[T(V,{media_list:e.value.media,media_folder_path:[v(q)].concat(d.value.slice(0,-1)).concat("media").join("/")},null,8,["media_list","media_folder_path"])]),_:1})):i("",!0)])])),T(le,{ref_key:"popUpManager",ref:y},null,512)],64)}}},S=I(Re,[["__scopeId","data-v-517c696a"]]),Se=[{path:"/",component:S},{path:"/:db_path(.*)",component:S,props:!0}],Ie=Z({history:ee("/dea/event_detail/"),routes:Se}),F=Y(ie);F.use(Ie);F.mount("#app");
