import{r as ne,c as a,o as t,d as A,N as re,w as P,j as T,m as ie,F as _,_ as W,a as s,h as r,b as D,t as d,i as b,u as v,k as S,g as U,n as le,p as oe,f as de,q as G,s as ue,v as $,x as ce,e as pe}from"./Navigation-Dx91ZCbe.js";import{M as X,c as ve,a as ye}from"./MediaGrid-Ds-70f9x.js";import{u as _e}from"./index-N8GIV6tk.js";import{m as M,a as E,f as he,i as me}from"./axios_config-BOxkkDfg.js";import{T as j}from"./ToggleShow-BPFzjegt.js";import{P as ge,T as fe,a as ke}from"./PopUpGeneric-DVD7e6OH.js";const be={__name:"App",setup(i){return(w,l)=>{const h=ne("router-view");return t(),a(_,null,[A(re),A(h,null,{default:P(({Component:x})=>[(t(),T(ie(x)))]),_:1})],64)}}},we={class:"popup-circle-div"},xe={class:"cd-aliases"},Ce={key:0,class:"cd-pen_names"},Le={key:1,class:"cd-position"},Pe={key:2,class:"cd-links"},Te={class:"cd-ul-links"},Me=["innerHTML"],Ae={key:3,class:"cd-descriptions"},He={class:"cd-ul-descriptions"},$e={key:4},je={__name:"PopUpCircledetails",props:{circle_db:{type:Object,required:!0},db_path:{type:Array,required:!0}},setup(i){return(w,l)=>(t(),T(ge,{onClose:l[0]||(l[0]=h=>w.$emit("close")),title:`Circle Details: ${i.circle_db.aliases[0]||"undefined"}`},{default:P(()=>{var h,x,n;return[s("div",we,[s("p",xe,[l[1]||(l[1]=s("span",{class:"info-name"},"Names:",-1)),D(" "+d((x=(h=i.circle_db)==null?void 0:h.aliases)==null?void 0:x.join(" / ")),1)]),i.circle_db.hasOwnProperty("pen_names")&&i.circle_db.pen_names?(t(),a("p",Ce,[l[2]||(l[2]=s("span",{class:"info-name"},"Pen names:",-1)),D(" "+d((n=i.circle_db.pen_names)==null?void 0:n.join(" / ")),1)])):r("",!0),i.circle_db.hasOwnProperty("position")&&i.circle_db.position?(t(),a("p",Le,[l[3]||(l[3]=s("span",{class:"info-name"},"Booth position:",-1)),D(" "+d(i.circle_db.position),1)])):r("",!0),i.circle_db.hasOwnProperty("links")&&i.circle_db.links?(t(),a("div",Pe,[l[4]||(l[4]=s("span",{class:"info-name"},"Links:",-1)),s("ul",Te,[(t(!0),a(_,null,b(i.circle_db.links,(m,H)=>(t(),a("li",{class:"cd-link",key:H},[s("span",{innerHTML:v(M)(m)},null,8,Me)]))),128))])])):r("",!0),i.circle_db.hasOwnProperty("comments")&&i.circle_db.comments?(t(),a("div",Ae,[l[5]||(l[5]=s("span",{class:"info-name"},"Comments:",-1)),s("ul",He,[(t(!0),a(_,null,b(i.circle_db.comments.split(`
`),(m,H)=>(t(),a("li",{class:"cd-descriptions",key:H},d(m),1))),128))])])):r("",!0),i.circle_db.hasOwnProperty("media")?(t(),a("div",$e,[l[6]||(l[6]=s("span",{class:"info-name"},"Media:",-1)),A(X,{media_list:i.circle_db.media,media_folder_path:[v(E)].concat(i.db_path).concat(["media"]).join("/")},null,8,["media_list","media_folder_path"])])):r("",!0)])]}),_:1},8,["title"]))}},De=W(je,[["__scopeId","data-v-7769a498"]]),Se={key:0},Ue={key:1},Ee={key:0,class:"status-message"},Oe={key:1,class:"status-message"},Ne={key:2},Re={class:"ed-div"},Be={key:0,class:"ed-header"},Ie=["href"],Ve={key:1,class:"ed-dates"},Fe={key:2,class:"ed-links"},qe=["innerHTML"],ze={class:"ts-description-div"},Ge=["innerHTML"],Ke={key:4,class:"ed-div-table"},We={class:"ed-search-row"},Xe=["value"],Je={class:"ed-input ed-regex-group"},Qe={class:"ed-results"},Ye={class:"ed-vlist"},Ze={class:"ed-body-table"},et=["onClick"],tt=["innerHTML"],st={key:0},at=["innerHTML"],nt={key:0},rt=["src"],it={key:0},lt=["innerHTML"],ot={key:2},dt={__name:"EventDetail",props:{db_path:String},setup(i){const w=i,l=S(""),h=S(!1),x=U(()=>{try{return new RegExp(l.value,"i")}catch{return null}}),n=S(null),m=S("loading");async function H(){he({url:[E].concat(C.value).join("/")+".json",axiosInstance:me,on_start:()=>{n.value={},m.value="loading"},on_success:c=>{if(!c.hasOwnProperty("aliases"))throw new Error("Invalid data format: 'aliases' property missing");n.value=c,m.value="loaded"},on_error:c=>{event_group_data_state.value="error"}})}const O=U(()=>{if(!n.value||!n.value.circles)return[];const c=(l.value||"").trim();if(!c)return n.value.circles;if(h.value&&c.length>0){if(!x.value)return[];const p=x.value;return n.value.circles.filter(u=>{const y=g=>Array.isArray(g)&&g.some(f=>typeof f=="string"&&p.test(f));return!!(y(u.aliases)||y(u.pen_names)||y(u==null?void 0:u.comments)||u.position!==void 0&&u.position!==null&&p.test(u.position.toString())||y(u.links))})}const o=c.toLowerCase();return n.value.circles.filter(p=>{var y;const u=g=>Array.isArray(g)&&g.some(f=>typeof f=="string"&&f.toLowerCase().includes(o));return!!(u(p.aliases)||u(p.pen_names)||(y=p==null?void 0:p.comments)!=null&&y.toLowerCase().includes(o)||p.position!==void 0&&p.position!==null&&p.position.toString().toLowerCase().includes(o)||u(p.links))})});function Q(c){l.value=c.target.value,te(0)}const{list:Y,containerProps:Z,wrapperProps:ee,scrollTo:te}=_e(O,{itemHeight:22}),C=U(()=>w.db_path?w.db_path.split("/").filter(Boolean):[]),N=le("popUpManager");function se(c){N.value.addPopup(ce(De),{circle_db:c,db_path:C.value.slice(0,-1)})}return oe(async()=>{C.value&&(console.log("Url change detected, now fetching new event data..."),w.db_path&&await H())}),(c,o)=>{var p,u,y,g,f,R,B,I,V,F,q,z;return t(),a(_,null,[s("head",null,[(p=n.value)!=null&&p.aliases?(t(),a("title",Se,`\r
      dea | Event Detail `+d(" - "+((y=(u=n.value)==null?void 0:u.aliases)==null?void 0:y.join(" / ")))+`\r
    `,1)):(t(),a("title",Ue,"dea | Event Detail"))]),o[7]||(o[7]=s("div",{class:"header-title"},"Event detail",-1)),m.value=="loading"?(t(),a("div",Ee," Loading database "+d(w.db_path)+"... ",1)):m.value=="error"?(t(),a("div",Oe,[o[2]||(o[2]=D(" Failed to fetch event group data. ")),s("button",{class:"retry-button",onClick:o[0]||(o[0]=(...e)=>c.fetch_db&&c.fetch_db(...e)),title:"Retry fetching event group data."}," Retry ")])):(t(),a("div",Ne,[s("div",Re,[n.value.hasOwnProperty("aliases")?(t(),a("div",Be,d(n.value.aliases.join(" / ")),1)):r("",!0),s("a",{class:"ed-parent",href:["/dea/event_group_detail/#"].concat(C.value).slice(0,-1).join("/")}," Parent event group: "+d(C.value[C.value.length-2]),9,Ie),(g=n.value)!=null&&g.dates?(t(),a("div",Ve," Dates: "+d(((f=n.value)==null?void 0:f.dates)??""),1)):r("",!0),(R=n.value)!=null&&R.links&&Array.isArray(n.value.links)?(t(),a("div",Fe,[o[3]||(o[3]=D(" Links: ")),s("span",{innerHTML:v(M)(n.value.links.join(", "))},null,8,qe)])):r("",!0),(B=n.value)!=null&&B.description?(t(),T(j,{key:3,class:"ts-description",button_text:"Description",default_hidden:!1},{default:P(()=>[s("div",ze,[(t(!0),a(_,null,b(n.value.description.split(`
`),(e,k)=>(t(),a("p",{key:k},[s("span",{innerHTML:v(M)(e)},null,8,Ge)]))),128))])]),_:1})):r("",!0),(I=n.value)!=null&&I.circles&&Array.isArray(n.value.circles)?(t(),a("div",Ke,[s("div",We,[s("input",{class:"ed-input",value:l.value,onInput:Q,placeholder:"Keywords"},null,40,Xe),s("div",Je,[o[4]||(o[4]=s("div",{class:"ed-regex-label"},"Use Regex ?",-1)),A(fe,{toggle_value:h.value,"onUpdate:toggle_value":o[1]||(o[1]=e=>h.value=e),titleFunc:e=>e?"regex search enabled":"regex search disabled"},null,8,["toggle_value","titleFunc"])]),s("div",Qe,"("+d((V=O.value)==null?void 0:V.length)+" results)",1)]),o[6]||(o[6]=de('<table class="ed-header-table" data-v-3412e973><thead data-v-3412e973><tr data-v-3412e973><th colspan="5" class="ed-table-title" data-v-3412e973>Participating circles</th></tr><tr data-v-3412e973><th style="width:5%;" data-v-3412e973>Details</th><th style="width:10%;" data-v-3412e973>Position</th><th style="width:30%;" data-v-3412e973>Aliases</th><th style="width:25%;" data-v-3412e973>Pen Names</th><th style="width:30%;" data-v-3412e973>Links</th></tr></thead></table>',1)),s("div",Ye,[s("div",G(v(Z),{class:"ed-vlist-component"}),[s("div",G(v(ee),{class:"ed-vlist-wrapper"}),[s("table",Ze,[o[5]||(o[5]=s("colgroup",null,[s("col",{style:{width:"5%"}}),s("col",{style:{width:"10%"}}),s("col",{style:{width:"30%"}}),s("col",{style:{width:"25%"}}),s("col",{style:{width:"30%"}})],-1)),s("tbody",null,[(t(!0),a(_,null,b(v(Y),e=>(t(),a("tr",{key:e.index,class:ue(["ed-vlist-item",e.index%2===0?"ed-vlist-item-even":"ed-vlist-item-odd"])},[s("td",{style:$({backgroundColor:e.index%2===0?"var(--grey-dark)":"var(--greyish-deep)",color:"var(--grey-light)",textAlign:"center"})},[s("button",{class:"ed-popup-button",onClick:k=>se(e.data),title:"Show circle details"}," ðŸ¡µ ",8,et)],4),s("td",{style:$({backgroundColor:e.index%2===0?"var(--grey-dark)":"var(--greyish-deep)",color:"var(--grey-light)"})},d(e.data.position??""),5),s("td",{style:$({backgroundColor:e.index%2===0?"var(--grey-dark)":"var(--greyish-deep)",color:"var(--grey-light)"})},d(Array.isArray(e.data.aliases)?e.data.aliases.join(" / "):e.data.aliases||""),5),s("td",{style:$({backgroundColor:e.index%2===0?"var(--grey-dark)":"var(--greyish-deep)",color:"var(--grey-light)"})},d(Array.isArray(e.data.pen_names)?e.data.pen_names.join(" / "):e.data.pen_names||""),5),s("td",{style:$({backgroundColor:e.index%2===0?"var(--grey-dark)":"var(--greyish-deep)",color:"var(--grey-light)"})},[s("span",{innerHTML:v(M)(Array.isArray(e.data.links)?e.data.links.join(", "):e.data.links||"")},null,8,tt)],4)],2))),128))])])],16)],16)])])):r("",!0),(F=n.value)!=null&&F.sources?(t(),T(j,{key:5,class:"ts-sources",button_text:"Sources"},{default:P(()=>[(t(!0),a(_,null,b(n.value.sources,(e,k)=>(t(),a("p",{key:k},[e.type?(t(),a("span",st,"("+d(e.type[0])+", "+d(e.type[1])+") ",1)):r("",!0),e!=null&&e.source?(t(),a("span",{key:1,innerHTML:v(M)(e.source)},null,8,at)):r("",!0)]))),128))]),_:1})):r("",!0),n.value&&((q=n.value)!=null&&q.comments)?(t(),T(j,{key:6,class:"ed-comments",button_text:"Comments"},{default:P(()=>[(t(!0),a(_,null,b(n.value.comments.split(`
`),(e,k)=>(t(),a("p",{key:k},d(e),1))),128))]),_:1})):r("",!0),(z=n.value)!=null&&z.locations?(t(),T(j,{key:7,class:"ts-sources",button_text:"Location"},{default:P(()=>[(t(!0),a(_,null,b(n.value.locations,(e,k)=>(t(),a("div",{key:k},[e!=null&&e.description?(t(),a("p",nt,d(e.description),1)):r("",!0),e!=null&&e.iframe_url?(t(),a("iframe",{key:1,src:e.iframe_url,width:"600",height:"450",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,rt)):r("",!0),(t(!0),a(_,null,b(e.sources,(L,ae)=>(t(),a("p",{key:ae},[L.type?(t(),a("span",it,"("+d(L.type[0])+", "+d(L.type[1])+") ",1)):r("",!0),L!=null&&L.source?(t(),a("span",{key:1,innerHTML:v(M)(L.source)},null,8,lt)):r("",!0)]))),128)),e!=null&&e.comments?(t(),a("p",ot,d(e.comments),1)):r("",!0)]))),128))]),_:1})):r("",!0),n.value?(t(),T(j,{key:8,class:"ts-sources",button_text:"Media"},{default:P(()=>[A(X,{media_list:n.value.media,media_folder_path:[v(E)].concat(C.value.slice(0,-1)).concat("media").join("/")},null,8,["media_list","media_folder_path"])]),_:1})):r("",!0)])])),A(ke,{ref_key:"popUpManager",ref:N},null,512)],64)}}},K=W(dt,[["__scopeId","data-v-3412e973"]]),ut=[{path:"/",component:K},{path:"/:db_path(.*)",component:K,props:!0}],ct=ve({history:ye("/dea/event_detail/"),routes:ut}),J=pe(be);J.use(ct);J.mount("#app");
