import{r as I,c as a,o as e,d as k,N as R,w as m,j as y,m as V,F as f,_ as P,g as $,k as w,a as r,t as u,s as M,i as B,p as F,b as z,h as d,u as N,e as X}from"./Navigation-yYuU6Nma.js";import{M as U,c as W,a as q}from"./MediaGrid-BdEbsuV1.js";import{m as S,a as J,f as K,P as Q,i as Y}from"./axios_config-yEhEWjiR.js";import{E as Z}from"./EventGroupTable-CuF3Q_Fy.js";import{T as b}from"./ToggleShow-CkQjWKhm.js";const ee={__name:"App",setup(x){return(s,t)=>{const l=I("router-view");return e(),a(f,null,[k(R),k(l,null,{default:m(({Component:_})=>[(e(),y(V(_)))]),_:1})],64)}}},te={class:"chart-div"},ae={class:"chart-title"},se={class:"chart-container"},ne={class:"chart"},oe=["onMouseover"],re={class:"bar-name"},le={__name:"BarChart",props:{data:Array,title:String,width:{type:String,default:"95vw"},height:{type:String,default:"20em"}},setup(x){const s=x,t=$(()=>{if(!s.data||s.data.length===0)return 1;let i=Math.max(...s.data.map(n=>n!=null&&n.value?n.value:0));return i==0?1:i}),l=w(!1),_=w(""),g=w("");function v(i,n){l.value=!0,_.value=i,n==null||n===null||isNaN(n)?g.value="N/A":g.value=n}function p(){l.value=!1}return(i,n)=>(e(),a("span",{style:M({width:s.width,height:s.height,display:"flex",box_sizing:"border-box"})},[r("div",te,[r("h3",ae,u(s.title),1),r("h1",{class:"bar-hover-display",style:M({opacity:l.value?.8:0})},u(_.value)+": "+u(g.value),5),r("div",se,[r("ul",ne,[(e(!0),a(f,null,B(s.data,(c,T)=>(e(),a("li",{key:c.name,class:"bar-container",onMouseover:E=>v(c.name,c.value),onMouseout:n[0]||(n[0]=E=>p())},[r("div",{class:"bar",style:M(`height: ${(c.value?c.value:0)/t.value*100}%;`)},null,4),r("span",re,u(c.name),1)],40,oe))),128))])])])],4))}},ie=P(le,[["__scopeId","data-v-ba888e4b"]]),ue={key:0},ce={key:1},de={key:0,class:"header"},_e={key:1},ve={key:0,class:"status-message"},pe={key:1,class:"status-message"},he={key:2},me={key:0},ye=["innerHTML"],fe={key:0},ge={class:"ed-links"},be=["innerHTML"],ke={__name:"EventGroupDetail",props:{db_path:String},setup(x){const s=x,t=w(null),l=w("loading");async function _(){K({url:[Q].concat(v.value).concat(["event_group.json"]).join("/"),axiosInstance:Y,on_start:()=>{t.value={},l.value="loading"},on_success:p=>{if(!p.hasOwnProperty("aliases"))throw new Error("Invalid data format: 'aliases' property missing");t.value=p,l.value="loaded"},on_error:p=>{l.value="error"}})}const g=$(()=>!t.value||!t.value.hasOwnProperty("media")?[]:t.value.media),v=$(()=>s.db_path?s.db_path.split("/").filter(Boolean):[]);return F(async()=>{v.value&&(console.log("Url change detected, now fetching new event data..."),s.db_path&&await _())}),(p,i)=>{var n,c,T,E,H,C;return e(),a(f,null,[r("head",null,[(n=t.value)!=null&&n.aliases?(e(),a("title",ue,`\r
      dea | Event Group Detail\r
      `+u(" - "+((T=(c=t.value)==null?void 0:c.aliases)==null?void 0:T.join(" / ")))+`\r
    `,1)):(e(),a("title",ce,"dea | Event Group Detail"))]),i[1]||(i[1]=r("div",{class:"header-title"},"Event group detail",-1)),s.db_path?(e(),a("div",_e,[l.value=="loading"?(e(),a("div",ve," Loading database "+u(s.db_path)+"... ",1)):l.value=="error"?(e(),a("div",pe,[i[0]||(i[0]=z(" Failed to fetch event group data. ")),r("button",{class:"retry-button",onClick:_,title:"Retry fetching event group data."}," Retry ")])):(e(),a("div",he,[k(Z,{event_group_db:t.value,eg_ar_path:v.value,show_details:!0},null,8,["event_group_db","eg_ar_path"]),(E=t.value)!=null&&E.sources?(e(),y(b,{key:0,class:"ts-sources",button_text:"Sources"},{default:m(()=>[(e(!0),a(f,null,B(t.value.sources,(o,h)=>(e(),a("p",{key:h},[o.type?(e(),a("span",me,"("+u(o.type[0])+", "+u(o.type[1])+") ",1)):d("",!0),o!=null&&o.source?(e(),a("span",{key:1,innerHTML:N(S)(o.source)},null,8,ye)):d("",!0)]))),128))]),_:1})):d("",!0),t.value?(e(),y(b,{key:1,class:"ts-sources",button_text:"Links"},{default:m(()=>{var o,h,D,L;return[!((o=t.value)!=null&&o.links)||Array.isArray((h=t.value)==null?void 0:h.links)&((D=t.value)==null?void 0:D.links)==0?(e(),a("div",fe," (None) ")):d("",!0),r("div",ge,[(e(!0),a(f,null,B((L=t.value)==null?void 0:L.links,(G,O)=>(e(),a("div",{key:O},[r("span",{innerHTML:N(S)(G)},null,8,be)]))),128))])]}),_:1})):d("",!0),t.value?(e(),y(b,{key:2,class:"ts-sources",button_text:"Media"},{default:m(()=>[k(U,{media_list:g.value,media_folder_path:[N(J)].concat(v.value).concat(["media"]).join("/")},null,8,["media_list","media_folder_path"])]),_:1})):d("",!0),(H=t.value)!=null&&H.comments?(e(),y(b,{key:3,class:"ts-comments",button_text:"Comments"},{default:m(()=>[(e(!0),a(f,null,B(t.value.comments.split(`
`),(o,h)=>(e(),a("p",{key:h},u(o),1))),128))]),_:1})):d("",!0),(C=t.value)!=null&&C.events?(e(),y(b,{key:4,class:"ts-sources",button_text:"Stats"},{default:m(()=>[k(ie,{data:Object.keys(t.value.events).map(o=>({value:t.value.events[o].circle_count,name:o})),title:"Event participation"},null,8,["data"])]),_:1})):d("",!0)]))])):(e(),a("div",de,' Invalid database to fetch: "'+u(s.db_path)+'" ',1))],64)}}},A=P(ke,[["__scopeId","data-v-7da91478"]]),we=[{path:"/",component:A},{path:"/:db_path(.*)",component:A,props:!0}],xe=W({history:q("/dea/event_group_detail/"),routes:we}),j=X(ee);j.use(xe);j.mount("#app");
